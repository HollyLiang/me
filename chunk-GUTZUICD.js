import{D as g,Pb as I,Rb as S,T as n,W as a,_b as d,p as c,s as m,u as f}from"./chunk-JXSNNN5X.js";var j={serverUrl:"http://localhost:5031/",production:!0};var k=(()=>{let e=class e{constructor(){this.PREFIX="HY"}setItem(t,r){localStorage.setItem(this.getTransKey(t),r)}getItem(t){return localStorage.getItem(this.getTransKey(t))||""}getTransKey(t){return this.PREFIX+t.toUpperCase()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var l=(()=>{let e=class e{constructor(t){this.localStorage=t}set accessToken(t){this.localStorage.setItem("AccessToken",t)}get accessToken(){return this.localStorage.getItem("AccessToken").toString()}set account(t){this.localStorage.setItem("Account",t.toString())}get account(){return this.localStorage.getItem("Account")}set rememberMe(t){this.localStorage.setItem("RememberMe",t.toString())}get rememberMe(){return this.localStorage.getItem("RememberMe")==="true"}set userInfo(t){this.localStorage.setItem("userInfo",JSON.stringify(t))}get userInfo(){let t=this.localStorage.getItem("userInfo");return t&&JSON.parse(t)||null}};e.\u0275fac=function(r){return new(r||e)(a(k))},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var M=(()=>{let e=class e{constructor(t,r){this.router=t,this.userService=r}intercept(t,r){let o=t.url;if(this._isCallAPI(o)){let i={};o&&o.startsWith("~/")&&(i.url=o.replace("~/",""));let h=this.userService.accessToken;h&&(i.headers={"access-token":h}),t=t.clone(i)}return r.handle(t).pipe(f(i=>i instanceof I?this._handleResponse(i,o):c(i)),g(i=>this._handleResponse(i,o)))}_handleResponse(t,r){if(this._isCallAPI(r)===!1)return c(t);switch(this._handleAccessToken(t),t.status){case 200:return c(t);case 400:throw new Error("400");case 401:this._navigateTo("auth/login");break}}_isCallAPI(t){return t.toLocaleLowerCase().startsWith("~/api")}_handleAccessToken(t){let r=t.headers.get("set-access-token");r&&(this.userService.accessToken=r)}_navigateTo(t){this.router.navigateByUrl(t)}};e.\u0275fac=function(r){return new(r||e)(a(d),a(l))},e.\u0275prov=n({token:e,factory:e.\u0275fac});let s=e;return s})();var J=(()=>{let e=class e{constructor(t,r){this.http=t,this.userService=r}signIn(t,r){let o={account:t,password:r};return this.http.post("~/api/auth/signIn",o).pipe(m(u=>(this.userService.userInfo=u,u)))}signOut(){return this.http.post("~/api/auth/signOut",null).pipe(m(t=>(this.userService.accessToken=null,t)))}};e.\u0275fac=function(r){return new(r||e)(a(S),a(l))},e.\u0275prov=n({token:e,factory:e.\u0275fac});let s=e;return s})();export{j as a,l as b,M as c,J as d};
